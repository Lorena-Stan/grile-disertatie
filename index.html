
<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grile Disertație</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    select, button { margin-top: 10px; padding: 10px; font-size: 16px; }
    .question { margin: 20px 0; }
    .answers label { display: block; margin-bottom: 5px; }
  </style>
</head>
<body>
  <h1>Test Grilă</h1>
  <label for="modeSelect">Selectează setul de grile:</label>
  <select id="modeSelect">
    <option value="mix">1. 80 random (Anatomie, Farmacologie, Fiziologie, Patologie, Bacteriologie)</option>
    <option value="anatomie">2. 100 Anatomie Patologică</option>
    <option value="farmacologie">3. 100 Farmacologie</option>
    <option value="fiziologie">4. 100 Fiziologie</option>
    <option value="patologie">5. 100 Patologie</option>
    <option value="bacteriologie">6. 100 Bacteriologie</option>
  </select>
  <div id="quiz">
    <div class="question" id="question"></div>
    <div class="answers" id="answers"></div>
    <button id="nextButton">Următoarea întrebare</button>
  </div>
  <div id="result" style="display:none;"></div>
  <script src="questions.js"></script>
  <script>
    const modeSelect = document.getElementById('modeSelect');
    let allQuestions = {
      anatomie: questions_anatomie,
      farmacologie: questions_farmacologie,
      fiziologie: questions_fiziologie,
      patologie: questions_patologie,
      bacteriologie: questions_bacteriologie
    };
    let selectedQuestions = [];
    let current = 0, score = 0;

    function shuffle(arr) {
      return arr.map(a => [Math.random(), a]).sort().map(a => a[1]);
    }

    function selectQuestions(mode) {
      if (mode === "mix") {
        let combined = [...questions_anatomie, ...questions_farmacologie, ...questions_fiziologie, ...questions_patologie, ...questions_bacteriologie];
        return shuffle(combined).slice(0, 80);
      }
      return shuffle(allQuestions[mode]).slice(0, 100);
    }

    function showQuestion() {
      const q = selectedQuestions[current];
      document.getElementById('question').textContent = (current + 1) + ". " + q.intrebare;
      const answersDiv = document.getElementById('answers');
      answersDiv.innerHTML = '';
      q.variante.forEach((opt, i) => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="radio" name="answer" value="${i}"> ${opt}`;
        answersDiv.appendChild(label);
      });
    }

    document.getElementById('nextButton').addEventListener('click', () => {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) return alert("Selectează un răspuns!");
      if (parseInt(selected.value) === selectedQuestions[current].corect) score++;
      current++;
      if (current < selectedQuestions.length) {
        showQuestion();
      } else {
        document.getElementById('quiz').style.display = 'none';
        document.getElementById('result').style.display = 'block';
        document.getElementById('result').innerHTML = `<h2>Ai obținut ${score} din ${selectedQuestions.length} puncte</h2>`;
        localStorage.setItem("lastScore", score);
      }
    });

    modeSelect.addEventListener('change', () => {
      current = 0; score = 0;
      document.getElementById('result').style.display = 'none';
      document.getElementById('quiz').style.display = 'block';
      selectedQuestions = selectQuestions(modeSelect.value);
      showQuestion();
    });

    selectedQuestions = selectQuestions("mix");
    showQuestion();
  </script>
</body>
</html>
